####################################################
#Top Earners Problem

#Solution - MS SQL Server 


WITH earnings AS (
    SELECT employee_id, name, months, salary, (months * salary) AS t_earnings 
    FROM Employee 
)
SELECT 
    MAX(t_earnings) AS max_earnings,
    COUNT(*) AS num_employees_with_max_earnings
FROM earnings
WHERE t_earnings = (SELECT MAX(t_earnings) FROM earnings)



#############################################
